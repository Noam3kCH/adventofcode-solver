905101f8b8e9e962ab53f9f5d4df4180
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.day = day;
const directions = [{
  y: 1,
  x: 0
}, {
  y: 0,
  x: 1
}, {
  y: -1,
  x: 0
}, {
  y: 0,
  x: -1
}];

function day(input) {
  const destination = input.split(', ').map(x => {
    const [, turn, count] = x.match(/^(R|L)(\d+)$/);
    return {
      turn: turn === 'R' ? 1 : -1,
      count: parseInt(count)
    };
  }).reduce((state, next) => {
    const direction = (state.direction + next.turn + directions.length) % directions.length;
    return new Array(next.count).fill().reduce(state => {
      const x = state.x + directions[direction].x;
      const y = state.y + directions[direction].y;

      if (state.history[`${x},${y}`]) {
        state.twice = state.twice || {
          x,
          y
        };
      } else {
        state.history[`${x},${y}`] = true;
      }

      return {
        direction,
        x,
        y,
        history: state.history,
        twice: state.twice
      };
    }, state);
  }, {
    direction: 0,
    x: 0,
    y: 0,
    history: {
      '0,0': true
    }
  });
  destination.twice = destination.twice || {
    x: NaN,
    y: NaN
  };
  const part1 = Math.abs(destination.x) + Math.abs(destination.y);
  const part2 = Math.abs(destination.twice.x) + Math.abs(destination.twice.y);
  return {
    part1,
    part2
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRheTAxLmpzIl0sIm5hbWVzIjpbImRpcmVjdGlvbnMiLCJ5IiwieCIsImRheSIsImlucHV0IiwiZGVzdGluYXRpb24iLCJzcGxpdCIsIm1hcCIsInR1cm4iLCJjb3VudCIsIm1hdGNoIiwicGFyc2VJbnQiLCJyZWR1Y2UiLCJzdGF0ZSIsIm5leHQiLCJkaXJlY3Rpb24iLCJsZW5ndGgiLCJBcnJheSIsImZpbGwiLCJoaXN0b3J5IiwidHdpY2UiLCJOYU4iLCJwYXJ0MSIsIk1hdGgiLCJhYnMiLCJwYXJ0MiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBTUEsVUFBVSxHQUFHLENBQ2pCO0FBQUVDLEVBQUFBLENBQUMsRUFBRSxDQUFMO0FBQVFDLEVBQUFBLENBQUMsRUFBRTtBQUFYLENBRGlCLEVBRWpCO0FBQUVELEVBQUFBLENBQUMsRUFBRSxDQUFMO0FBQVFDLEVBQUFBLENBQUMsRUFBRTtBQUFYLENBRmlCLEVBR2pCO0FBQUVELEVBQUFBLENBQUMsRUFBRSxDQUFDLENBQU47QUFBU0MsRUFBQUEsQ0FBQyxFQUFFO0FBQVosQ0FIaUIsRUFJakI7QUFBRUQsRUFBQUEsQ0FBQyxFQUFFLENBQUw7QUFBUUMsRUFBQUEsQ0FBQyxFQUFFLENBQUM7QUFBWixDQUppQixDQUFuQjs7QUFNTyxTQUFTQyxHQUFULENBQWFDLEtBQWIsRUFBb0I7QUFDekIsUUFBTUMsV0FBVyxHQUFHRCxLQUFLLENBQ3RCRSxLQURpQixDQUNYLElBRFcsRUFFakJDLEdBRmlCLENBRWJMLENBQUMsSUFBSTtBQUNSLFVBQU0sR0FBR00sSUFBSCxFQUFTQyxLQUFULElBQWtCUCxDQUFDLENBQUNRLEtBQUYsQ0FBUSxjQUFSLENBQXhCO0FBQ0EsV0FBTztBQUFFRixNQUFBQSxJQUFJLEVBQUVBLElBQUksS0FBSyxHQUFULEdBQWUsQ0FBZixHQUFtQixDQUFDLENBQTVCO0FBQStCQyxNQUFBQSxLQUFLLEVBQUVFLFFBQVEsQ0FBQ0YsS0FBRDtBQUE5QyxLQUFQO0FBQ0QsR0FMaUIsRUFNakJHLE1BTmlCLENBT2hCLENBQUNDLEtBQUQsRUFBUUMsSUFBUixLQUFpQjtBQUNmLFVBQU1DLFNBQVMsR0FDYixDQUFDRixLQUFLLENBQUNFLFNBQU4sR0FBa0JELElBQUksQ0FBQ04sSUFBdkIsR0FBOEJSLFVBQVUsQ0FBQ2dCLE1BQTFDLElBQW9EaEIsVUFBVSxDQUFDZ0IsTUFEakU7QUFFQSxXQUFPLElBQUlDLEtBQUosQ0FBVUgsSUFBSSxDQUFDTCxLQUFmLEVBQXNCUyxJQUF0QixHQUE2Qk4sTUFBN0IsQ0FBb0NDLEtBQUssSUFBSTtBQUNsRCxZQUFNWCxDQUFDLEdBQUdXLEtBQUssQ0FBQ1gsQ0FBTixHQUFVRixVQUFVLENBQUNlLFNBQUQsQ0FBVixDQUFzQmIsQ0FBMUM7QUFDQSxZQUFNRCxDQUFDLEdBQUdZLEtBQUssQ0FBQ1osQ0FBTixHQUFVRCxVQUFVLENBQUNlLFNBQUQsQ0FBVixDQUFzQmQsQ0FBMUM7O0FBQ0EsVUFBSVksS0FBSyxDQUFDTSxPQUFOLENBQWUsR0FBRWpCLENBQUUsSUFBR0QsQ0FBRSxFQUF4QixDQUFKLEVBQWdDO0FBQzlCWSxRQUFBQSxLQUFLLENBQUNPLEtBQU4sR0FBY1AsS0FBSyxDQUFDTyxLQUFOLElBQWU7QUFBRWxCLFVBQUFBLENBQUY7QUFBS0QsVUFBQUE7QUFBTCxTQUE3QjtBQUNELE9BRkQsTUFFTztBQUNMWSxRQUFBQSxLQUFLLENBQUNNLE9BQU4sQ0FBZSxHQUFFakIsQ0FBRSxJQUFHRCxDQUFFLEVBQXhCLElBQTZCLElBQTdCO0FBQ0Q7O0FBQ0QsYUFBTztBQUNMYyxRQUFBQSxTQURLO0FBRUxiLFFBQUFBLENBRks7QUFHTEQsUUFBQUEsQ0FISztBQUlMa0IsUUFBQUEsT0FBTyxFQUFFTixLQUFLLENBQUNNLE9BSlY7QUFLTEMsUUFBQUEsS0FBSyxFQUFFUCxLQUFLLENBQUNPO0FBTFIsT0FBUDtBQU9ELEtBZk0sRUFlSlAsS0FmSSxDQUFQO0FBZ0JELEdBMUJlLEVBMkJoQjtBQUFFRSxJQUFBQSxTQUFTLEVBQUUsQ0FBYjtBQUFnQmIsSUFBQUEsQ0FBQyxFQUFFLENBQW5CO0FBQXNCRCxJQUFBQSxDQUFDLEVBQUUsQ0FBekI7QUFBNEJrQixJQUFBQSxPQUFPLEVBQUU7QUFBRSxhQUFPO0FBQVQ7QUFBckMsR0EzQmdCLENBQXBCO0FBNkJBZCxFQUFBQSxXQUFXLENBQUNlLEtBQVosR0FBb0JmLFdBQVcsQ0FBQ2UsS0FBWixJQUFxQjtBQUFFbEIsSUFBQUEsQ0FBQyxFQUFFbUIsR0FBTDtBQUFVcEIsSUFBQUEsQ0FBQyxFQUFFb0I7QUFBYixHQUF6QztBQUVBLFFBQU1DLEtBQUssR0FBR0MsSUFBSSxDQUFDQyxHQUFMLENBQVNuQixXQUFXLENBQUNILENBQXJCLElBQTBCcUIsSUFBSSxDQUFDQyxHQUFMLENBQVNuQixXQUFXLENBQUNKLENBQXJCLENBQXhDO0FBQ0EsUUFBTXdCLEtBQUssR0FBR0YsSUFBSSxDQUFDQyxHQUFMLENBQVNuQixXQUFXLENBQUNlLEtBQVosQ0FBa0JsQixDQUEzQixJQUFnQ3FCLElBQUksQ0FBQ0MsR0FBTCxDQUFTbkIsV0FBVyxDQUFDZSxLQUFaLENBQWtCbkIsQ0FBM0IsQ0FBOUM7QUFDQSxTQUFPO0FBQUVxQixJQUFBQSxLQUFGO0FBQVNHLElBQUFBO0FBQVQsR0FBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZGlyZWN0aW9ucyA9IFtcbiAgeyB5OiAxLCB4OiAwIH0sXG4gIHsgeTogMCwgeDogMSB9LFxuICB7IHk6IC0xLCB4OiAwIH0sXG4gIHsgeTogMCwgeDogLTEgfSxcbl07XG5leHBvcnQgZnVuY3Rpb24gZGF5KGlucHV0KSB7XG4gIGNvbnN0IGRlc3RpbmF0aW9uID0gaW5wdXRcbiAgICAuc3BsaXQoJywgJylcbiAgICAubWFwKHggPT4ge1xuICAgICAgY29uc3QgWywgdHVybiwgY291bnRdID0geC5tYXRjaCgvXihSfEwpKFxcZCspJC8pO1xuICAgICAgcmV0dXJuIHsgdHVybjogdHVybiA9PT0gJ1InID8gMSA6IC0xLCBjb3VudDogcGFyc2VJbnQoY291bnQpIH07XG4gICAgfSlcbiAgICAucmVkdWNlKFxuICAgICAgKHN0YXRlLCBuZXh0KSA9PiB7XG4gICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9XG4gICAgICAgICAgKHN0YXRlLmRpcmVjdGlvbiArIG5leHQudHVybiArIGRpcmVjdGlvbnMubGVuZ3RoKSAlIGRpcmVjdGlvbnMubGVuZ3RoO1xuICAgICAgICByZXR1cm4gbmV3IEFycmF5KG5leHQuY291bnQpLmZpbGwoKS5yZWR1Y2Uoc3RhdGUgPT4ge1xuICAgICAgICAgIGNvbnN0IHggPSBzdGF0ZS54ICsgZGlyZWN0aW9uc1tkaXJlY3Rpb25dLng7XG4gICAgICAgICAgY29uc3QgeSA9IHN0YXRlLnkgKyBkaXJlY3Rpb25zW2RpcmVjdGlvbl0ueTtcbiAgICAgICAgICBpZiAoc3RhdGUuaGlzdG9yeVtgJHt4fSwke3l9YF0pIHtcbiAgICAgICAgICAgIHN0YXRlLnR3aWNlID0gc3RhdGUudHdpY2UgfHwgeyB4LCB5IH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0YXRlLmhpc3RvcnlbYCR7eH0sJHt5fWBdID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgICAgIHgsXG4gICAgICAgICAgICB5LFxuICAgICAgICAgICAgaGlzdG9yeTogc3RhdGUuaGlzdG9yeSxcbiAgICAgICAgICAgIHR3aWNlOiBzdGF0ZS50d2ljZSxcbiAgICAgICAgICB9O1xuICAgICAgICB9LCBzdGF0ZSk7XG4gICAgICB9LFxuICAgICAgeyBkaXJlY3Rpb246IDAsIHg6IDAsIHk6IDAsIGhpc3Rvcnk6IHsgJzAsMCc6IHRydWUgfSB9LFxuICAgICk7XG4gIGRlc3RpbmF0aW9uLnR3aWNlID0gZGVzdGluYXRpb24udHdpY2UgfHwgeyB4OiBOYU4sIHk6IE5hTiB9O1xuXG4gIGNvbnN0IHBhcnQxID0gTWF0aC5hYnMoZGVzdGluYXRpb24ueCkgKyBNYXRoLmFicyhkZXN0aW5hdGlvbi55KTtcbiAgY29uc3QgcGFydDIgPSBNYXRoLmFicyhkZXN0aW5hdGlvbi50d2ljZS54KSArIE1hdGguYWJzKGRlc3RpbmF0aW9uLnR3aWNlLnkpO1xuICByZXR1cm4geyBwYXJ0MSwgcGFydDIgfTtcbn1cbiJdfQ==