{"version":3,"sources":["day04.js"],"names":["parseRoom","s","name","sector","checksum","match","parseInt","occurences","replace","split","sort","reduce","obj","c","Object","keys","map","x","letter","times","a","b","charCodeAt","join","slice","shift","t","String","fromCharCode","decrypt","word","parse","input","filter","room","part1","rooms","sum","part2","findIndex"],"mappings":";;;;;;;;AAAA,SAASA,SAAT,CAAmBC,CAAnB,EAAsB;AACpB,QAAM,GAAGC,IAAH,EAASC,MAAT,EAAiBC,QAAjB,IAA6BH,CAAC,CAACI,KAAF,CAAQ,sBAAR,CAAnC;AACA,SAAO;AAAEH,IAAAA,IAAF;AAAQC,IAAAA,MAAM,EAAEG,QAAQ,CAACH,MAAD,CAAxB;AAAkCC,IAAAA;AAAlC,GAAP;AACD;;AAED,SAASA,QAAT,CAAkBH,CAAlB,EAAqB;AACnB,QAAMM,UAAU,GAAGN,CAAC,CACjBO,OADgB,CACR,IADQ,EACF,EADE,EAEhBC,KAFgB,CAEV,EAFU,EAGhBC,IAHgB,GAIhBC,MAJgB,CAIT,CAACC,GAAD,EAAMC,CAAN,KAAY;AAClB,WAAO,EAAE,GAAGD,GAAL;AAAU,OAACC,CAAD,GAAK,CAACD,GAAG,CAACC,CAAD,CAAH,IAAU,CAAX,IAAgB;AAA/B,KAAP;AACD,GANgB,EAMd,EANc,CAAnB;AAOA,SAAOC,MAAM,CAACC,IAAP,CAAYR,UAAZ,EACJS,GADI,CACAC,CAAC,KAAK;AAAEC,IAAAA,MAAM,EAAED,CAAV;AAAaE,IAAAA,KAAK,EAAEZ,UAAU,CAACU,CAAD;AAA9B,GAAL,CADD,EAEJP,IAFI,CAEC,CAACU,CAAD,EAAIC,CAAJ,KACJD,CAAC,CAACD,KAAF,KAAYE,CAAC,CAACF,KAAd,GACIC,CAAC,CAACF,MAAF,CAASI,UAAT,CAAoB,CAApB,IAAyBD,CAAC,CAACH,MAAF,CAASI,UAAT,CAAoB,CAApB,CAD7B,GAEID,CAAC,CAACF,KAAF,GAAUC,CAAC,CAACD,KALb,EAOJH,GAPI,CAOAC,CAAC,IAAIA,CAAC,CAACC,MAPP,EAQJK,IARI,CAQC,EARD,EASJC,KATI,CASE,CATF,EASK,CATL,CAAP;AAUD;;AAED,SAASC,KAAT,CAAeZ,CAAf,EAAkBa,CAAlB,EAAqB;AACnB,SAAOC,MAAM,CAACC,YAAP,CACJ,CAACf,CAAC,CAACS,UAAF,CAAa,CAAb,IAAkB,IAAIA,UAAJ,CAAe,CAAf,CAAlB,GAAsCI,CAAvC,IAA4C,EAA7C,GAAmD,IAAIJ,UAAJ,CAAe,CAAf,CAD9C,CAAP;AAGD;;AAED,SAASO,OAAT,CAAiB3B,IAAjB,EAAuBC,MAAvB,EAA+B;AAC7B,SAAOD,IAAI,CACRO,KADI,CACE,GADF,EAEJO,GAFI,CAEAc,IAAI,IACPA,IAAI,CACDrB,KADH,CACS,EADT,EAEGO,GAFH,CAEOH,CAAC,IAAIY,KAAK,CAACZ,CAAD,EAAIV,MAAJ,CAFjB,EAGGoB,IAHH,CAGQ,EAHR,CAHG,EAQJA,IARI,CAQC,GARD,CAAP;AASD;;AAED,SAASQ,KAAT,CAAeC,KAAf,EAAsB;AACpB,SAAOA,KAAK,CACTvB,KADI,CACE,IADF,EAEJO,GAFI,CAEAhB,SAFA,EAGJiC,MAHI,CAGGC,IAAI,IAAIA,IAAI,CAAC9B,QAAL,KAAkBA,QAAQ,CAAC8B,IAAI,CAAChC,IAAN,CAHrC,CAAP;AAID;;AAEM,SAASiC,KAAT,CAAeH,KAAf,EAAsB;AAC3B,QAAMI,KAAK,GAAGL,KAAK,CAACC,KAAD,CAAnB;AACA,SAAOI,KAAK,CAACzB,MAAN,CAAa,CAAC0B,GAAD,EAAMH,IAAN,KAAeG,GAAG,GAAGH,IAAI,CAAC/B,MAAvC,EAA+C,CAA/C,CAAP;AACD;;AAEM,SAASmC,KAAT,CAAeN,KAAf,EAAsB;AAC3B,QAAMI,KAAK,GAAGL,KAAK,CAACC,KAAD,CAAnB;AACA,QAAME,IAAI,GAAGE,KAAK,CACfpB,GADU,CACNkB,IAAI,IAAIL,OAAO,CAACK,IAAI,CAAChC,IAAN,EAAYgC,IAAI,CAAC/B,MAAjB,CADT,EAEVoC,SAFU,CAEAtB,CAAC,IAAIA,CAAC,KAAK,0BAFX,CAAb;AAGA,SAAOmB,KAAK,CAACF,IAAD,CAAL,IAAeE,KAAK,CAACF,IAAD,CAAL,CAAY/B,MAAlC;AACD","sourcesContent":["function parseRoom(s) {\n  const [, name, sector, checksum] = s.match(/^(.*)-(\\d+)\\[(.*)\\]$/);\n  return { name, sector: parseInt(sector), checksum };\n}\n\nfunction checksum(s) {\n  const occurences = s\n    .replace(/-/g, '')\n    .split('')\n    .sort()\n    .reduce((obj, c) => {\n      return { ...obj, [c]: (obj[c] || 0) + 1 };\n    }, {});\n  return Object.keys(occurences)\n    .map(x => ({ letter: x, times: occurences[x] }))\n    .sort((a, b) =>\n      a.times === b.times\n        ? a.letter.charCodeAt(0) - b.letter.charCodeAt(0)\n        : b.times - a.times,\n    )\n    .map(x => x.letter)\n    .join('')\n    .slice(0, 5);\n}\n\nfunction shift(c, t) {\n  return String.fromCharCode(\n    ((c.charCodeAt(0) - 'a'.charCodeAt(0) + t) % 26) + 'a'.charCodeAt(0),\n  );\n}\n\nfunction decrypt(name, sector) {\n  return name\n    .split('-')\n    .map(word =>\n      word\n        .split('')\n        .map(c => shift(c, sector))\n        .join(''),\n    )\n    .join(' ');\n}\n\nfunction parse(input) {\n  return input\n    .split('\\n')\n    .map(parseRoom)\n    .filter(room => room.checksum === checksum(room.name));\n}\n\nexport function part1(input) {\n  const rooms = parse(input);\n  return rooms.reduce((sum, room) => sum + room.sector, 0);\n}\n\nexport function part2(input) {\n  const rooms = parse(input);\n  const room = rooms\n    .map(room => decrypt(room.name, room.sector))\n    .findIndex(x => x === 'northpole object storage');\n  return rooms[room] && rooms[room].sector;\n}\n"]}