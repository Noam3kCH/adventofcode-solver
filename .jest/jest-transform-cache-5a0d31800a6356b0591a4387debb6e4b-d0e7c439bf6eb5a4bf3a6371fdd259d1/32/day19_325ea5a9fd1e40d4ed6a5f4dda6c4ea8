644e6bd92052b569a93ca78217da5092
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.part1 = part1;
exports.part2 = part2;
const ops = {
  addr: (r, i1, i2, o) => r[o] = r[i1] + r[i2],
  addi: (r, i1, i2, o) => r[o] = r[i1] + i2,
  mulr: (r, i1, i2, o) => r[o] = r[i1] * r[i2],
  muli: (r, i1, i2, o) => r[o] = r[i1] * i2,
  banr: (r, i1, i2, o) => r[o] = r[i1] & r[i2],
  bani: (r, i1, i2, o) => r[o] = r[i1] & i2,
  borr: (r, i1, i2, o) => r[o] = r[i1] | r[i2],
  bori: (r, i1, i2, o) => r[o] = r[i1] | i2,
  setr: (r, i1, i2, o) => r[o] = r[i1],
  seti: (r, i1, i2, o) => r[o] = i1,
  gtir: (r, i1, i2, o) => r[o] = i1 > r[i2] ? 1 : 0,
  gtri: (r, i1, i2, o) => r[o] = r[i1] > i2 ? 1 : 0,
  gtrr: (r, i1, i2, o) => r[o] = r[i1] > r[i2] ? 1 : 0,
  eqir: (r, i1, i2, o) => r[o] = i1 === r[i2] ? 1 : 0,
  eqri: (r, i1, i2, o) => r[o] = r[i1] === i2 ? 1 : 0,
  eqrr: (r, i1, i2, o) => r[o] = r[i1] === r[i2] ? 1 : 0
};

const numbers = arr => arr.map(x => parseInt(x));

function part1(input, reg0 = 0) {
  const lines = input.split('\n');
  const ip = parseInt(lines.shift().split(' ').pop());
  const commands = lines.map(x => {
    const [op, ...params] = x.split(' ');
    return {
      op,
      params: numbers(params)
    };
  });
  const r = [reg0, 0, 0, 0, 0, 0];

  while (commands[r[ip]]) {
    if (reg0 === 1 && r[ip] === 2) {
      return Math.max(...r);
    }

    ops[commands[r[ip]].op](r, ...commands[r[ip]].params);
    r[ip]++;
  }

  return r[0];
}

function divisors(x) {
  const result = [];
  const sqrt = Math.sqrt(x);

  for (let i = 1; i <= sqrt; i++) {
    if (x % i === 0) {
      result.push(i);

      if (i !== sqrt) {
        result.push(x / i);
      }
    }
  }

  return result;
}

function part2(input) {
  return divisors(part1(input, 1)).reduce((sum, x) => sum + x, 0);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRheTE5LmpzIl0sIm5hbWVzIjpbIm9wcyIsImFkZHIiLCJyIiwiaTEiLCJpMiIsIm8iLCJhZGRpIiwibXVsciIsIm11bGkiLCJiYW5yIiwiYmFuaSIsImJvcnIiLCJib3JpIiwic2V0ciIsInNldGkiLCJndGlyIiwiZ3RyaSIsImd0cnIiLCJlcWlyIiwiZXFyaSIsImVxcnIiLCJudW1iZXJzIiwiYXJyIiwibWFwIiwieCIsInBhcnNlSW50IiwicGFydDEiLCJpbnB1dCIsInJlZzAiLCJsaW5lcyIsInNwbGl0IiwiaXAiLCJzaGlmdCIsInBvcCIsImNvbW1hbmRzIiwib3AiLCJwYXJhbXMiLCJNYXRoIiwibWF4IiwiZGl2aXNvcnMiLCJyZXN1bHQiLCJzcXJ0IiwiaSIsInB1c2giLCJwYXJ0MiIsInJlZHVjZSIsInN1bSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLE1BQU1BLEdBQUcsR0FBRztBQUNWQyxFQUFBQSxJQUFJLEVBQUUsQ0FBQ0MsQ0FBRCxFQUFJQyxFQUFKLEVBQVFDLEVBQVIsRUFBWUMsQ0FBWixLQUFtQkgsQ0FBQyxDQUFDRyxDQUFELENBQUQsR0FBT0gsQ0FBQyxDQUFDQyxFQUFELENBQUQsR0FBUUQsQ0FBQyxDQUFDRSxFQUFELENBRC9CO0FBRVZFLEVBQUFBLElBQUksRUFBRSxDQUFDSixDQUFELEVBQUlDLEVBQUosRUFBUUMsRUFBUixFQUFZQyxDQUFaLEtBQW1CSCxDQUFDLENBQUNHLENBQUQsQ0FBRCxHQUFPSCxDQUFDLENBQUNDLEVBQUQsQ0FBRCxHQUFRQyxFQUY5QjtBQUdWRyxFQUFBQSxJQUFJLEVBQUUsQ0FBQ0wsQ0FBRCxFQUFJQyxFQUFKLEVBQVFDLEVBQVIsRUFBWUMsQ0FBWixLQUFtQkgsQ0FBQyxDQUFDRyxDQUFELENBQUQsR0FBT0gsQ0FBQyxDQUFDQyxFQUFELENBQUQsR0FBUUQsQ0FBQyxDQUFDRSxFQUFELENBSC9CO0FBSVZJLEVBQUFBLElBQUksRUFBRSxDQUFDTixDQUFELEVBQUlDLEVBQUosRUFBUUMsRUFB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RCxDQUFGLENBQVIsQ0FBZ0JJLEVBQWpCLENBQUgsQ0FBd0JqQyxDQUF4QixFQUEyQixHQUFHZ0MsUUFBUSxDQUFDaEMsQ0FBQyxDQUFDNkIsRUFBRCxDQUFGLENBQVIsQ0FBZ0JLLE1BQTlDO0FBQ0FsQyxJQUFBQSxDQUFDLENBQUM2QixFQUFELENBQUQ7QUFDRDs7QUFDRCxTQUFPN0IsQ0FBQyxDQUFDLENBQUQsQ0FBUjtBQUNEOztBQUVELFNBQVNxQyxRQUFULENBQWtCZixDQUFsQixFQUFxQjtBQUNuQixRQUFNZ0IsTUFBTSxHQUFHLEVBQWY7QUFDQSxRQUFNQyxJQUFJLEdBQUdKLElBQUksQ0FBQ0ksSUFBTCxDQUFVakIsQ0FBVixDQUFiOztBQUNBLE9BQUssSUFBSWtCLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLElBQUlELElBQXJCLEVBQTJCQyxDQUFDLEVBQTVCLEVBQWdDO0FBQzlCLFFBQUlsQixDQUFDLEdBQUdrQixDQUFKLEtBQVUsQ0FBZCxFQUFpQjtBQUNmRixNQUFBQSxNQUFNLENBQUNHLElBQVAsQ0FBWUQsQ0FBWjs7QUFDQSxVQUFJQSxDQUFDLEtBQUtELElBQVYsRUFBZ0I7QUFDZEQsUUFBQUEsTUFBTSxDQUFDRyxJQUFQLENBQVluQixDQUFDLEdBQUdrQixDQUFoQjtBQUNEO0FBQ0Y7QUFDRjs7QUFDRCxTQUFPRixNQUFQO0FBQ0Q7O0FBRU0sU0FBU0ksS0FBVCxDQUFlakIsS0FBZixFQUFzQjtBQUMzQixTQUFPWSxRQUFRLENBQUNiLEtBQUssQ0FBQ0MsS0FBRCxFQUFRLENBQVIsQ0FBTixDQUFSLENBQTBCa0IsTUFBMUIsQ0FBaUMsQ0FBQ0MsR0FBRCxFQUFNdEIsQ0FBTixLQUFZc0IsR0FBRyxHQUFHdEIsQ0FBbkQsRUFBc0QsQ0FBdEQsQ0FBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgb3BzID0ge1xuICBhZGRyOiAociwgaTEsIGkyLCBvKSA9PiAocltvXSA9IHJbaTFdICsgcltpMl0pLFxuICBhZGRpOiAociwgaTEsIGkyLCBvKSA9PiAocltvXSA9IHJbaTFdICsgaTIpLFxuICBtdWxyOiAociwgaTEsIGkyLCBvKSA9PiAocltvXSA9IHJbaTFdICogcltpMl0pLFxuICBtdWxpOiAociwgaTEsIGkyLCBvKSA9PiAocltvXSA9IHJbaTFdICogaTIpLFxuICBiYW5yOiAociwgaTEsIGkyLCBvKSA9PiAocltvXSA9IHJbaTFdICYgcltpMl0pLFxuICBiYW5pOiAociwgaTEsIGkyLCBvKSA9PiAocltvXSA9IHJbaTFdICYgaTIpLFxuICBib3JyOiAociwgaTEsIGkyLCBvKSA9PiAocltvXSA9IHJbaTFdIHwgcltpMl0pLFxuICBib3JpOiAociwgaTEsIGkyLCBvKSA9PiAocltvXSA9IHJbaTFdIHwgaTIpLFxuICBzZXRyOiAociwgaTEsIGkyLCBvKSA9PiAocltvXSA9IHJbaTFdKSxcbiAgc2V0aTogKHIsIGkxLCBpMiwgbykgPT4gKHJbb10gPSBpMSksXG4gIGd0aXI6IChyLCBpMSwgaTIsIG8pID0+IChyW29dID0gaTEgPiByW2kyXSA/IDEgOiAwKSxcbiAgZ3RyaTogKHIsIGkxLCBpMiwgbykgPT4gKHJbb10gPSByW2kxXSA+IGkyID8gMSA6IDApLFxuICBndHJyOiAociwgaTEsIGkyLCBvKSA9PiAocltvXSA9IHJbaTFdID4gcltpMl0gPyAxIDogMCksXG4gIGVxaXI6IChyLCBpMSwgaTIsIG8pID0+IChyW29dID0gaTEgPT09IHJbaTJdID8gMSA6IDApLFxuICBlcXJpOiAociwgaTEsIGkyLCBvKSA9PiAocltvXSA9IHJbaTFdID09PSBpMiA/IDEgOiAwKSxcbiAgZXFycjogKHIsIGkxLCBpMiwgbykgPT4gKHJbb10gPSByW2kxXSA9PT0gcltpMl0gPyAxIDogMCksXG59O1xuY29uc3QgbnVtYmVycyA9IGFyciA9PiBhcnIubWFwKHggPT4gcGFyc2VJbnQoeCkpO1xuXG5leHBvcnQgZnVuY3Rpb24gcGFydDEoaW5wdXQsIHJlZzAgPSAwKSB7XG4gIGNvbnN0IGxpbmVzID0gaW5wdXQuc3BsaXQoJ1xcbicpO1xuICBjb25zdCBpcCA9IHBhcnNlSW50KFxuICAgIGxpbmVzXG4gICAgICAuc2hpZnQoKVxuICAgICAgLnNwbGl0KCcgJylcbiAgICAgIC5wb3AoKSxcbiAgKTtcbiAgY29uc3QgY29tbWFuZHMgPSBsaW5lcy5tYXAoeCA9PiB7XG4gICAgY29uc3QgW29wLCAuLi5wYXJhbXNdID0geC5zcGxpdCgnICcpO1xuICAgIHJldHVybiB7IG9wLCBwYXJhbXM6IG51bWJlcnMocGFyYW1zKSB9O1xuICB9KTtcbiAgY29uc3QgciA9IFtyZWcwLCAwLCAwLCAwLCAwLCAwXTtcbiAgd2hpbGUgKGNvbW1hbmRzW3JbaXBdXSkge1xuICAgIGlmIChyZWcwID09PSAxICYmIHJbaXBdID09PSAyKSB7XG4gICAgICByZXR1cm4gTWF0aC5tYXgoLi4ucik7XG4gICAgfVxuICAgIG9wc1tjb21tYW5kc1tyW2lwXV0ub3BdKHIsIC4uLmNvbW1hbmRzW3JbaXBdXS5wYXJhbXMpO1xuICAgIHJbaXBdKys7XG4gIH1cbiAgcmV0dXJuIHJbMF07XG59XG5cbmZ1bmN0aW9uIGRpdmlzb3JzKHgpIHtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGNvbnN0IHNxcnQgPSBNYXRoLnNxcnQoeCk7XG4gIGZvciAobGV0IGkgPSAxOyBpIDw9IHNxcnQ7IGkrKykge1xuICAgIGlmICh4ICUgaSA9PT0gMCkge1xuICAgICAgcmVzdWx0LnB1c2goaSk7XG4gICAgICBpZiAoaSAhPT0gc3FydCkge1xuICAgICAgICByZXN1bHQucHVzaCh4IC8gaSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJ0MihpbnB1dCkge1xuICByZXR1cm4gZGl2aXNvcnMocGFydDEoaW5wdXQsIDEpKS5yZWR1Y2UoKHN1bSwgeCkgPT4gc3VtICsgeCwgMCk7XG59XG4iXX0=