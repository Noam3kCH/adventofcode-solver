bd6036de35c6dc1a5ab4496111bf83ef
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.part2 = exports.part1 = void 0;

function solve1(destination) {
  let radius = 0;
  let multiplier = 0;

  while (8 * multiplier + 1 < destination) {
    radius++;
    multiplier += radius;
  }

  const bottomRight = 8 * multiplier + 1;
  const bottomLeft = bottomRight - radius * 2;
  const topLeft = bottomLeft - radius * 2;
  const topRight = topLeft - radius * 2;
  const fromCorner = Math.min(Math.abs(topRight - destination), Math.abs(bottomLeft - destination));
  return radius * 2 - Math.min(fromCorner, radius * 2 - fromCorner);
}

function toKey({
  x,
  y
}) {
  return `${x}-${y}`;
}

function next({
  position,
  direction
}) {
  const {
    x,
    y
  } = position;

  switch (direction) {
    case 'R':
      return {
        x: x + 1,
        y
      };

    case 'L':
      return {
        x: x - 1,
        y
      };

    case 'U':
      return {
        x,
        y: y - 1
      };

    case 'D':
      return {
        x,
        y: y + 1
      };

    default:
  }
}

function calc({
  position,
  map
}) {
  const {
    x,
    y
  } = position;
  return [map[toKey({
    x: x - 1,
    y: y - 1
  })] || 0, map[toKey({
    x: x + 0,
    y: y - 1
  })] || 0, map[toKey({
    x: x + 1,
    y: y - 1
  })] || 0, map[toKey({
    x: x - 1,
    y: y + 0
  })] || 0, map[toKey({
    x: x + 1,
    y: y + 0
  })] || 0, map[toKey({
    x: x - 1,
    y: y + 1
  })] || 0, map[toKey({
    x: x + 0,
    y: y + 1
  })] || 0, map[toKey({
    x: x + 1,
    y: y + 1
  })] || 0].reduce((sum, x) => sum + x);
}

function direction({
  position,
  direction,
  map
}) {
  switch (direction) {
    case 'R':
      return map[toKey(next({
        position,
        direction: 'U'
      }))] ? direction : 'U';

    case 'L':
      return map[toKey(next({
        position,
        direction: 'D'
      }))] ? direction : 'D';

    case 'U':
      return map[toKey(next({
        position,
        direction: 'L'
      }))] ? direction : 'L';

    case 'D':
      return map[toKey(next({
        position,
        direction: 'R'
      }))] ? direction : 'R';

    default:
  }
}

function solve2(destination) {
  const state = {
    position: {
      x: 0,
      y: 0
    },
    direction: 'R',
    map: {
      [toKey({
        x: 0,
        y: 0
      })]: 1
    }
  };
  let current = 1;

  while (current <= destination) {
    state.position = next(state);
    current = state.map[toKey(state.position)] = calc(state);
    state.direction = direction(state);
  }

  return current;
}

const part1 = input => solve1(parseInt(input));

exports.part1 = part1;

const part2 = input => solve2(parseInt(input));

exports.part2 = part2;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRheTAzLmpzIl0sIm5hbWVzIjpbInNvbHZlMSIsImRlc3RpbmF0aW9uIiwicmFkaXVzIiwibXVsdGlwbGllciIsImJvdHRvbVJpZ2h0IiwiYm90dG9tTGVmdCIsInRvcExlZnQiLCJ0b3BSaWdodCIsImZyb21Db3JuZXIiLCJNYXRoIiwibWluIiwiYWJzIiwidG9LZXkiLCJ4IiwieSIsIm5leHQiLCJwb3NpdGlvbiIsImRpcmVjdGlvbiIsImNhbGMiLCJtYXAiLCJyZWR1Y2UiLCJzdW0iLCJzb2x2ZTIiLCJzdGF0ZSIsImN1cnJlbnQiLCJwYXJ0MSIsImlucHV0IiwicGFyc2VJbnQiLCJwYXJ0MiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLFNBQVNBLE1BQVQsQ0FBZ0JDLFdBQWhCLEVBQTZCO0FBQzNCLE1BQUlDLE1BQU0sR0FBRyxDQUFiO0FBQ0EsTUFBSUMsVUFBVSxHQUFHLENBQWpCOztBQUNBLFNBQU8sSUFBSUEsVUFBSixHQUFpQixDQUFqQixHQUFxQkYsV0FBNUIsRUFBeUM7QUFDdkNDLElBQUFBLE1BQU07QUFDTkMsSUFBQUEsVUFBVSxJQUFJRCxNQUFkO0FBQ0Q7O0FBQ0QsUUFBTUUsV0FBVyxHQUFHLElBQUlELFVBQUosR0FBaUIsQ0FBckM7QUFDQSxRQUFNRSxVQUFVLEdBQUdELFdBQVcsR0FBR0YsTUFBTSxHQUFHLENBQTFDO0FBQ0EsUUFBTUksT0FBTyxHQUFHRCxVQUFVLEdBQUdILE1BQU0sR0FBRyxDQUF0QztBQUNBLFFBQU1LLFFBQVEsR0FBR0QsT0FBTyxHQUFHSixNQUFNLEdBQUcsQ0FBcEM7QUFDQSxRQUFNTSxVQUFVLEdBQUdDLElBQUksQ0FBQ0MsR0FBTCxDQUNqQkQsSUFBSSxDQUFDRSxHQUFMLENBQVNKLFFBQVEsR0FBR04sV0FBcEIsQ0FEaUIsRUFFakJRLElBQUksQ0FBQ0UsR0FBTCxDQUFTTixVQUFVLEdBQUdKLFdBQXRCLENBRmlCLENBQW5CO0FBSUEsU0FBT0MsTUFBTSxHQUFHLENBQVQsR0FBYU8sSUFBSSxDQUFD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QUc7QUFDWlAsSUFBQUEsUUFBUSxFQUFFO0FBQUVILE1BQUFBLENBQUMsRUFBRSxDQUFMO0FBQVFDLE1BQUFBLENBQUMsRUFBRTtBQUFYLEtBREU7QUFFWkcsSUFBQUEsU0FBUyxFQUFFLEdBRkM7QUFHWkUsSUFBQUEsR0FBRyxFQUFFO0FBQUUsT0FBQ1AsS0FBSyxDQUFDO0FBQUVDLFFBQUFBLENBQUMsRUFBRSxDQUFMO0FBQVFDLFFBQUFBLENBQUMsRUFBRTtBQUFYLE9BQUQsQ0FBTixHQUF5QjtBQUEzQjtBQUhPLEdBQWQ7QUFLQSxNQUFJVSxPQUFPLEdBQUcsQ0FBZDs7QUFDQSxTQUFPQSxPQUFPLElBQUl2QixXQUFsQixFQUErQjtBQUM3QnNCLElBQUFBLEtBQUssQ0FBQ1AsUUFBTixHQUFpQkQsSUFBSSxDQUFDUSxLQUFELENBQXJCO0FBQ0FDLElBQUFBLE9BQU8sR0FBR0QsS0FBSyxDQUFDSixHQUFOLENBQVVQLEtBQUssQ0FBQ1csS0FBSyxDQUFDUCxRQUFQLENBQWYsSUFBbUNFLElBQUksQ0FBQ0ssS0FBRCxDQUFqRDtBQUNBQSxJQUFBQSxLQUFLLENBQUNOLFNBQU4sR0FBa0JBLFNBQVMsQ0FBQ00sS0FBRCxDQUEzQjtBQUNEOztBQUNELFNBQU9DLE9BQVA7QUFDRDs7QUFFTSxNQUFNQyxLQUFLLEdBQUdDLEtBQUssSUFBSTFCLE1BQU0sQ0FBQzJCLFFBQVEsQ0FBQ0QsS0FBRCxDQUFULENBQTdCOzs7O0FBQ0EsTUFBTUUsS0FBSyxHQUFHRixLQUFLLElBQUlKLE1BQU0sQ0FBQ0ssUUFBUSxDQUFDRCxLQUFELENBQVQsQ0FBN0IiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBzb2x2ZTEoZGVzdGluYXRpb24pIHtcbiAgbGV0IHJhZGl1cyA9IDA7XG4gIGxldCBtdWx0aXBsaWVyID0gMDtcbiAgd2hpbGUgKDggKiBtdWx0aXBsaWVyICsgMSA8IGRlc3RpbmF0aW9uKSB7XG4gICAgcmFkaXVzKys7XG4gICAgbXVsdGlwbGllciArPSByYWRpdXM7XG4gIH1cbiAgY29uc3QgYm90dG9tUmlnaHQgPSA4ICogbXVsdGlwbGllciArIDE7XG4gIGNvbnN0IGJvdHRvbUxlZnQgPSBib3R0b21SaWdodCAtIHJhZGl1cyAqIDI7XG4gIGNvbnN0IHRvcExlZnQgPSBib3R0b21MZWZ0IC0gcmFkaXVzICogMjtcbiAgY29uc3QgdG9wUmlnaHQgPSB0b3BMZWZ0IC0gcmFkaXVzICogMjtcbiAgY29uc3QgZnJvbUNvcm5lciA9IE1hdGgubWluKFxuICAgIE1hdGguYWJzKHRvcFJpZ2h0IC0gZGVzdGluYXRpb24pLFxuICAgIE1hdGguYWJzKGJvdHRvbUxlZnQgLSBkZXN0aW5hdGlvbiksXG4gICk7XG4gIHJldHVybiByYWRpdXMgKiAyIC0gTWF0aC5taW4oZnJvbUNvcm5lciwgcmFkaXVzICogMiAtIGZyb21Db3JuZXIpO1xufVxuXG5mdW5jdGlvbiB0b0tleSh7IHgsIHkgfSkge1xuICByZXR1cm4gYCR7eH0tJHt5fWA7XG59XG5cbmZ1bmN0aW9uIG5leHQoeyBwb3NpdGlvbiwgZGlyZWN0aW9uIH0pIHtcbiAgY29uc3QgeyB4LCB5IH0gPSBwb3NpdGlvbjtcbiAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICBjYXNlICdSJzpcbiAgICAgIHJldHVybiB7IHg6IHggKyAxLCB5IH07XG4gICAgY2FzZSAnTCc6XG4gICAgICByZXR1cm4geyB4OiB4IC0gMSwgeSB9O1xuICAgIGNhc2UgJ1UnOlxuICAgICAgcmV0dXJuIHsgeCwgeTogeSAtIDEgfTtcbiAgICBjYXNlICdEJzpcbiAgICAgIHJldHVybiB7IHgsIHk6IHkgKyAxIH07XG4gICAgZGVmYXVsdDpcbiAgfVxufVxuXG5mdW5jdGlvbiBjYWxjKHsgcG9zaXRpb24sIG1hcCB9KSB7XG4gIGNvbnN0IHsgeCwgeSB9ID0gcG9zaXRpb247XG4gIHJldHVybiBbXG4gICAgbWFwW3RvS2V5KHsgeDogeCAtIDEsIHk6IHkgLSAxIH0pXSB8fCAwLFxuICAgIG1hcFt0b0tleSh7IHg6IHggKyAwLCB5OiB5IC0gMSB9KV0gfHwgMCxcbiAgICBtYXBbdG9LZXkoeyB4OiB4ICsgMSwgeTogeSAtIDEgfSldIHx8IDAsXG4gICAgbWFwW3RvS2V5KHsgeDogeCAtIDEsIHk6IHkgKyAwIH0pXSB8fCAwLFxuICAgIG1hcFt0b0tleSh7IHg6IHggKyAxLCB5OiB5ICsgMCB9KV0gfHwgMCxcbiAgICBtYXBbdG9LZXkoeyB4OiB4IC0gMSwgeTogeSArIDEgfSldIHx8IDAsXG4gICAgbWFwW3RvS2V5KHsgeDogeCArIDAsIHk6IHkgKyAxIH0pXSB8fCAwLFxuICAgIG1hcFt0b0tleSh7IHg6IHggKyAxLCB5OiB5ICsgMSB9KV0gfHwgMCxcbiAgXS5yZWR1Y2UoKHN1bSwgeCkgPT4gc3VtICsgeCk7XG59XG5cbmZ1bmN0aW9uIGRpcmVjdGlvbih7IHBvc2l0aW9uLCBkaXJlY3Rpb24sIG1hcCB9KSB7XG4gIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgY2FzZSAnUic6XG4gICAgICByZXR1cm4gbWFwW3RvS2V5KG5leHQoeyBwb3NpdGlvbiwgZGlyZWN0aW9uOiAnVScgfSkpXSA/IGRpcmVjdGlvbiA6ICdVJztcbiAgICBjYXNlICdMJzpcbiAgICAgIHJldHVybiBtYXBbdG9LZXkobmV4dCh7IHBvc2l0aW9uLCBkaXJlY3Rpb246ICdEJyB9KSldID8gZGlyZWN0aW9uIDogJ0QnO1xuICAgIGNhc2UgJ1UnOlxuICAgICAgcmV0dXJuIG1hcFt0b0tleShuZXh0KHsgcG9zaXRpb24sIGRpcmVjdGlvbjogJ0wnIH0pKV0gPyBkaXJlY3Rpb24gOiAnTCc7XG4gICAgY2FzZSAnRCc6XG4gICAgICByZXR1cm4gbWFwW3RvS2V5KG5leHQoeyBwb3NpdGlvbiwgZGlyZWN0aW9uOiAnUicgfSkpXSA/IGRpcmVjdGlvbiA6ICdSJztcbiAgICBkZWZhdWx0OlxuICB9XG59XG5cbmZ1bmN0aW9uIHNvbHZlMihkZXN0aW5hdGlvbikge1xuICBjb25zdCBzdGF0ZSA9IHtcbiAgICBwb3NpdGlvbjogeyB4OiAwLCB5OiAwIH0sXG4gICAgZGlyZWN0aW9uOiAnUicsXG4gICAgbWFwOiB7IFt0b0tleSh7IHg6IDAsIHk6IDAgfSldOiAxIH0sXG4gIH07XG4gIGxldCBjdXJyZW50ID0gMTtcbiAgd2hpbGUgKGN1cnJlbnQgPD0gZGVzdGluYXRpb24pIHtcbiAgICBzdGF0ZS5wb3NpdGlvbiA9IG5leHQoc3RhdGUpO1xuICAgIGN1cnJlbnQgPSBzdGF0ZS5tYXBbdG9LZXkoc3RhdGUucG9zaXRpb24pXSA9IGNhbGMoc3RhdGUpO1xuICAgIHN0YXRlLmRpcmVjdGlvbiA9IGRpcmVjdGlvbihzdGF0ZSk7XG4gIH1cbiAgcmV0dXJuIGN1cnJlbnQ7XG59XG5cbmV4cG9ydCBjb25zdCBwYXJ0MSA9IGlucHV0ID0+IHNvbHZlMShwYXJzZUludChpbnB1dCkpO1xuZXhwb3J0IGNvbnN0IHBhcnQyID0gaW5wdXQgPT4gc29sdmUyKHBhcnNlSW50KGlucHV0KSk7XG4iXX0=