47637b5e5ebf9b724ad47b54b24b1f20
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.part2 = exports.part1 = void 0;
const operations = {
  hlf: (state, p1) => ({ ...state,
    [p1]: state[p1] / 2,
    next: state.next + 1
  }),
  tpl: (state, p1) => ({ ...state,
    [p1]: state[p1] * 3,
    next: state.next + 1
  }),
  inc: (state, p1) => ({ ...state,
    [p1]: state[p1] + 1,
    next: state.next + 1
  }),
  jmp: (state, p1) => ({ ...state,
    next: state.next + p1
  }),
  jie: (state, p1, p2) => ({ ...state,
    next: state.next + (state[p1] % 2 ? 1 : p2)
  }),
  jio: (state, p1, p2) => ({ ...state,
    next: state.next + (state[p1] !== 1 ? 1 : p2)
  })
};

function run(state, instructions) {
  while (instructions[state.next]) {
    const curr = instructions[state.next];
    state = operations[curr.op](state, curr.p1, curr.p2);
  }

  return state;
}

function parse(input) {
  return input.split('\n').map(x => {
    return x.match(/^(\w+) ([\w+-]+)(?:, ([\w+-]+))?$/).map(x => x && x.match(/^[+-]/) ? parseInt(x) : x);
  }).map(x => ({
    op: x[1],
    p1: x[2],
    p2: x[3]
  }));
}

const part1 = input => run({
  a: 0,
  b: 0,
  next: 0
}, parse(input)).b;

exports.part1 = part1;

const part2 = input => run({
  a: 1,
  b: 0,
  next: 0
}, parse(input)).b;

exports.part2 = part2;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRheTIzLmpzIl0sIm5hbWVzIjpbIm9wZXJhdGlvbnMiLCJobGYiLCJzdGF0ZSIsInAxIiwibmV4dCIsInRwbCIsImluYyIsImptcCIsImppZSIsInAyIiwiamlvIiwicnVuIiwiaW5zdHJ1Y3Rpb25zIiwiY3VyciIsIm9wIiwicGFyc2UiLCJpbnB1dCIsInNwbGl0IiwibWFwIiwieCIsIm1hdGNoIiwicGFyc2VJbnQiLCJwYXJ0MSIsImEiLCJiIiwicGFydDIiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQU1BLFVBQVUsR0FBRztBQUNqQkMsRUFBQUEsR0FBRyxFQUFFLENBQUNDLEtBQUQsRUFBUUMsRUFBUixNQUFnQixFQUFFLEdBQUdELEtBQUw7QUFBWSxLQUFDQyxFQUFELEdBQU1ELEtBQUssQ0FBQ0MsRUFBRCxDQUFMLEdBQVksQ0FBOUI7QUFBaUNDLElBQUFBLElBQUksRUFBRUYsS0FBSyxDQUFDRSxJQUFOLEdBQWE7QUFBcEQsR0FBaEIsQ0FEWTtBQUVqQkMsRUFBQUEsR0FBRyxFQUFFLENBQUNILEtBQUQsRUFBUUMsRUFBUixNQUFnQixFQUFFLEdBQUdELEtBQUw7QUFBWSxLQUFDQyxFQUFELEdBQU1ELEtBQUssQ0FBQ0MsRUFBRCxDQUFMLEdBQVksQ0FBOUI7QUFBaUNDLElBQUFBLElBQUksRUFBRUYsS0FBSyxDQUFDRSxJQUFOLEdBQWE7QUFBcEQsR0FBaEIsQ0FGWTtBQUdqQkUsRUFBQUEsR0FBRyxFQUFFLENBQUNKLEtBQUQsRUFBUUMsRUFBUixNQUFnQixFQUFFLEdBQUdELEtBQUw7QUFBWSxLQUFDQyxFQUFELEdBQU1ELEtBQUssQ0FBQ0MsRUFBRCxDQUFMLEdBQVksQ0FBOUI7QUFBaUNDLElBQUFBLElBQUksRUFBRUYsS0FBSyxDQUFDRSxJQUFOLEdBQWE7QUFBcEQsR0FBaEIsQ0FIWTtBQUlqQkcsRUFBQUEsR0FBRyxFQUFFLENBQUNMLEtBQUQsRUFBUUMsRUFBUixNQUFnQixFQUFFLEdBQUdELEtBQUw7QUFBWUUsSUFBQUEsSUFBSSxFQUFFRixLQUFLLENBQUNFLElBQU4sR0FBYUQ7QUFBL0IsR0FBaEIsQ0FKWTtBQUtqQkssRUFBQUEsR0FBRyxFQUFFLENBQUNOLEtBQUQsRUFBUUMsRUFBUixFQUFZTSxFQUFaLE1BQW9CLEVBQ3ZCLEdBQUdQLEtBRG9CO0FBRXZCRSxJQUFBQSxJQUFJLEVBQUVGLEtBQUssQ0FBQ0UsSUFBTixJQUFjRixLQUFLLENBQUNDLEVBQUQsQ0FBTCxHQUFZLENBQVosR0FBZ0IsQ0FBaEIsR0FBb0JNLEVBQWxDO0FBRmlCLEdBQXBCLENBTFk7QUFTakJDLEVBQUFBLEdBQUcsRUFBRSxDQUFDUixLQUFELEVBQVFDLEVBQVIsRUFBWU0sRUFBWixNQUFvQixFQUN2QixHQUFHUCxLQURvQjtBQUV2QkUsSUFBQUEsSUFBSSxFQUFFRixLQUFLLENBQUNFLElBQU4sSUFBY0YsS0FBSyxDQUFDQyxFQUFELENBQUwsS0FBYyxDQUFkLEdBQWtCLENBQWxCLEdBQXNCTSxFQUFwQztBQUZpQixHQUFwQjtBQVRZLENBQW5COztBQWVBLFNBQVNFLEdBQVQsQ0FBYVQsS0FBYixFQUFvQlUsWUFBcEIsRUFBa0M7QUFDaEMsU0FBT0EsWUFBWSxDQUFDVixLQUFLLENBQUNFLElBQVAsQ0FBbkIsRUFBaUM7QUFDL0IsVUFBTVMsSUFBSSxHQUFHRCxZQUFZLENBQUNWLEtBQUssQ0FBQ0UsSUFBUCxDQUF6QjtBQUNBRixJQUFBQSxLQUFLLEdBQUdGLFVBQVUsQ0FBQ2EsSUFBSSxDQUFDQyxFQUFOLENBQVYsQ0FBb0JaLEtBQXBCLEVBQTJCVyxJQUFJLENBQUNWLEVBQWhDLEVBQW9DVSxJQUFJLENBQUNKLEVBQXpDLENBQVI7QUFDRDs7QUFDRCxTQUFPUCxLQUFQO0FBQ0Q7O0FBRUQsU0FBU2EsS0FBVCxDQUFlQyxLQUFmLEVBQXNCO0FBQ3BCLFNBQU9BLEtBQUssQ0FDVEMsS0FESSxDQUNFLElBREYsRUFFSkMsR0FGSSxDQUVBQyxDQUFDLElBQUk7QUFDUixXQUFPQSxDQUFDLENBQ0xDLEtBREksQ0FDRSxtQ0FERixFQUVKRixHQUZJLENBRUFDLENBQUMsSUFBS0EsQ0FBQyxJQUFJQSxDQUFDLENBQUNDLEtBQUYsQ0FBUSxPQUFSLENBQUwsR0FBd0JDLFFBQVEsQ0FBQ0YsQ0FBRCxDQUFoQyxHQUFzQ0EsQ0FGNUMsQ0FBUDtBQUdELEdBTkksRUFPSkQsR0FQSSxDQU9BQyxDQUFDLEtBQUs7QUFBRUwsSUFBQUEsRUFBRSxFQUFFSyxDQUFDLENBQUMsQ0FBRCxDQUFQO0FBQVloQixJQUFBQSxFQUFFLEVBQUVnQixDQUFDLENBQUMsQ0FBRCxDQUFqQjtBQUFzQlYsSUFBQUEsRUFBRSxFQUFFVSxDQUFDLENBQUMsQ0FBRDtBQUEzQixHQUFMLENBUEQsQ0FBUDtBQVFEOztBQUVNLE1BQU1HLEtBQUssR0FBR04sS0FBSyxJQUFJTCxHQUFHLENBQUM7QUFBRVksRUFBQUEsQ0FBQyxFQUFFLENBQUw7QUFBUUMsRUFBQUEsQ0FBQyxFQUFFLENBQVg7QUFBY3BCLEVBQUFBLElBQUksRUFBRTtBQUFwQixDQUFELEVBQTBCVyxLQUFLLENBQUNDLEtBQUQsQ0FBL0IsQ0FBSCxDQUEyQ1EsQ0FBbEU7Ozs7QUFDQSxNQUFNQyxLQUFLLEdBQUdULEtBQUssSUFBSUwsR0FBRyxDQUFDO0FBQUVZLEVBQUFBLENBQUMsRUFBRSxDQUFMO0FBQVFDLEVBQUFBLENBQUMsRUFBRSxDQUFYO0FBQWNwQixFQUFBQSxJQUFJLEVBQUU7QUFBcEIsQ0FBRCxFQUEwQlcsS0FBSyxDQUFDQyxLQUFELENBQS9CLENBQUgsQ0FBMkNRLENBQWxFIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgb3BlcmF0aW9ucyA9IHtcbiAgaGxmOiAoc3RhdGUsIHAxKSA9PiAoeyAuLi5zdGF0ZSwgW3AxXTogc3RhdGVbcDFdIC8gMiwgbmV4dDogc3RhdGUubmV4dCArIDEgfSksXG4gIHRwbDogKHN0YXRlLCBwMSkgPT4gKHsgLi4uc3RhdGUsIFtwMV06IHN0YXRlW3AxXSAqIDMsIG5leHQ6IHN0YXRlLm5leHQgKyAxIH0pLFxuICBpbmM6IChzdGF0ZSwgcDEpID0+ICh7IC4uLnN0YXRlLCBbcDFdOiBzdGF0ZVtwMV0gKyAxLCBuZXh0OiBzdGF0ZS5uZXh0ICsgMSB9KSxcbiAgam1wOiAoc3RhdGUsIHAxKSA9PiAoeyAuLi5zdGF0ZSwgbmV4dDogc3RhdGUubmV4dCArIHAxIH0pLFxuICBqaWU6IChzdGF0ZSwgcDEsIHAyKSA9PiAoe1xuICAgIC4uLnN0YXRlLFxuICAgIG5leHQ6IHN0YXRlLm5leHQgKyAoc3RhdGVbcDFdICUgMiA/IDEgOiBwMiksXG4gIH0pLFxuICBqaW86IChzdGF0ZSwgcDEsIHAyKSA9PiAoe1xuICAgIC4uLnN0YXRlLFxuICAgIG5leHQ6IHN0YXRlLm5leHQgKyAoc3RhdGVbcDFdICE9PSAxID8gMSA6IHAyKSxcbiAgfSksXG59O1xuXG5mdW5jdGlvbiBydW4oc3RhdGUsIGluc3RydWN0aW9ucykge1xuICB3aGlsZSAoaW5zdHJ1Y3Rpb25zW3N0YXRlLm5leHRdKSB7XG4gICAgY29uc3QgY3VyciA9IGluc3RydWN0aW9uc1tzdGF0ZS5uZXh0XTtcbiAgICBzdGF0ZSA9IG9wZXJhdGlvbnNbY3Vyci5vcF0oc3RhdGUsIGN1cnIucDEsIGN1cnIucDIpO1xuICB9XG4gIHJldHVybiBzdGF0ZTtcbn1cblxuZnVuY3Rpb24gcGFyc2UoaW5wdXQpIHtcbiAgcmV0dXJuIGlucHV0XG4gICAgLnNwbGl0KCdcXG4nKVxuICAgIC5tYXAoeCA9PiB7XG4gICAgICByZXR1cm4geFxuICAgICAgICAubWF0Y2goL14oXFx3KykgKFtcXHcrLV0rKSg/OiwgKFtcXHcrLV0rKSk/JC8pXG4gICAgICAgIC5tYXAoeCA9PiAoeCAmJiB4Lm1hdGNoKC9eWystXS8pID8gcGFyc2VJbnQoeCkgOiB4KSk7XG4gICAgfSlcbiAgICAubWFwKHggPT4gKHsgb3A6IHhbMV0sIHAxOiB4WzJdLCBwMjogeFszXSB9KSk7XG59XG5cbmV4cG9ydCBjb25zdCBwYXJ0MSA9IGlucHV0ID0+IHJ1bih7IGE6IDAsIGI6IDAsIG5leHQ6IDAgfSwgcGFyc2UoaW5wdXQpKS5iO1xuZXhwb3J0IGNvbnN0IHBhcnQyID0gaW5wdXQgPT4gcnVuKHsgYTogMSwgYjogMCwgbmV4dDogMCB9LCBwYXJzZShpbnB1dCkpLmI7XG4iXX0=