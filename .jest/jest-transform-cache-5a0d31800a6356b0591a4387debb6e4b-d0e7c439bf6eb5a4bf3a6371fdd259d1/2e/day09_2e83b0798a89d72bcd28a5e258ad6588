1b96b6f131c2755e458dc50b57ec3014
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.part2 = exports.part1 = void 0;

function decodeLength(s, v2) {
  const [, prefix, lengthStr, timesStr, rest] = s.match(/^([^(]*)(?:\((\d+)x(\d+)\))?(.*)$/);

  if (lengthStr) {
    const length = parseInt(lengthStr);
    const times = parseInt(timesStr);
    const repeat = times * (v2 ? decodeLength(rest.slice(0, length), v2) : length);
    return prefix.length + repeat + decodeLength(rest.slice(length), v2);
  } else {
    return prefix.length;
  }
}

const part1 = input => decodeLength(input);

exports.part1 = part1;

const part2 = input => decodeLength(input, true);

exports.part2 = part2;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRheTA5LmpzIl0sIm5hbWVzIjpbImRlY29kZUxlbmd0aCIsInMiLCJ2MiIsInByZWZpeCIsImxlbmd0aFN0ciIsInRpbWVzU3RyIiwicmVzdCIsIm1hdGNoIiwibGVuZ3RoIiwicGFyc2VJbnQiLCJ0aW1lcyIsInJlcGVhdCIsInNsaWNlIiwicGFydDEiLCJpbnB1dCIsInBhcnQyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsU0FBU0EsWUFBVCxDQUFzQkMsQ0FBdEIsRUFBeUJDLEVBQXpCLEVBQTZCO0FBQzNCLFFBQU0sR0FBR0MsTUFBSCxFQUFXQyxTQUFYLEVBQXNCQyxRQUF0QixFQUFnQ0MsSUFBaEMsSUFBd0NMLENBQUMsQ0FBQ00sS0FBRixDQUM1QyxtQ0FENEMsQ0FBOUM7O0FBR0EsTUFBSUgsU0FBSixFQUFlO0FBQ2IsVUFBTUksTUFBTSxHQUFHQyxRQUFRLENBQUNMLFNBQUQsQ0FBdkI7QUFDQSxVQUFNTSxLQUFLLEdBQUdELFFBQVEsQ0FBQ0osUUFBRCxDQUF0QjtBQUNBLFVBQU1NLE1BQU0sR0FDVkQsS0FBSyxJQUFJUixFQUFFLEdBQUdGLFlBQVksQ0FBQ00sSUFBSSxDQUFDTSxLQUFMLENBQVcsQ0FBWCxFQUFjSixNQUFkLENBQUQsRUFBd0JOLEVBQXhCLENBQWYsR0FBNkNNLE1BQW5ELENBRFA7QUFFQSxXQUFPTCxNQUFNLENBQUNLLE1BQVAsR0FBZ0JHLE1BQWhCLEdBQXlCWCxZQUFZLENBQUNNLElBQUksQ0FBQ00sS0FBTCxDQUFXSixNQUFYLENBQUQsRUFBcUJOLEVBQXJCLENBQTVDO0FBQ0QsR0FORCxNQU1PO0FBQ0wsV0FBT0MsTUFBTSxDQUFDSyxNQUFkO0FBQ0Q7QUFDRjs7QUFFTSxNQUFNSyxLQUFLLEdBQUdDLEtBQUssSUFBSWQsWUFBWSxDQUFDYyxLQUFELENBQW5DOzs7O0FBQ0EsTUFBTUMsS0FBSyxHQUFHRCxLQUFLLElBQUlkLFlBQVksQ0FBQ2MsS0FBRCxFQUFRLElBQVIsQ0FBbkMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBkZWNvZGVMZW5ndGgocywgdjIpIHtcbiAgY29uc3QgWywgcHJlZml4LCBsZW5ndGhTdHIsIHRpbWVzU3RyLCByZXN0XSA9IHMubWF0Y2goXG4gICAgL14oW14oXSopKD86XFwoKFxcZCspeChcXGQrKVxcKSk/KC4qKSQvLFxuICApO1xuICBpZiAobGVuZ3RoU3RyKSB7XG4gICAgY29uc3QgbGVuZ3RoID0gcGFyc2VJbnQobGVuZ3RoU3RyKTtcbiAgICBjb25zdCB0aW1lcyA9IHBhcnNlSW50KHRpbWVzU3RyKTtcbiAgICBjb25zdCByZXBlYXQgPVxuICAgICAgdGltZXMgKiAodjIgPyBkZWNvZGVMZW5ndGgocmVzdC5zbGljZSgwLCBsZW5ndGgpLCB2MikgOiBsZW5ndGgpO1xuICAgIHJldHVybiBwcmVmaXgubGVuZ3RoICsgcmVwZWF0ICsgZGVjb2RlTGVuZ3RoKHJlc3Quc2xpY2UobGVuZ3RoKSwgdjIpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBwcmVmaXgubGVuZ3RoO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBwYXJ0MSA9IGlucHV0ID0+IGRlY29kZUxlbmd0aChpbnB1dCk7XG5leHBvcnQgY29uc3QgcGFydDIgPSBpbnB1dCA9PiBkZWNvZGVMZW5ndGgoaW5wdXQsIHRydWUpO1xuIl19